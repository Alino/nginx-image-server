box: wercker-labs/docker
build:
  steps:
    - script:
        name: Check docker version
        code: |
          docker -v
    - script:
        name: Build target
        code: |
          cd ${WERCKER_SOURCE_DIR}
          docker build -t target .
    - script:
        name: Run target
        code: >
          script/run-target -d
    - script:
        name: Run tester
        code: >
          script/run-tester
  after-steps:
    - wantedly/pretty-slack-notify:
        webhook_url: $SLACK_WEBHOOK_URL
        channel: $SLACK_CHANNEL
